$(document).ready(function() {
    $('#login-form').submit(function (event) {
        event.preventDefault(); // 阻止表单提交

        const username = $('#use_name').val();
        const password = $('#use_password').val();

        // 创建一个包含表单数据的JSON对象
        const formData = {
            use_name: username,
            use_password: password
        };

        $.ajax({
            url: '/api/login',
            type: 'POST',
            dataType: 'json',
            contentType: 'application/json',
            data: JSON.stringify(formData),
            success: function (response) {
                // 请求成功
                var message = '';
                if (response.status === true) {
                    message = '登陆成功';
                    var creatToken = response.creatToken;
                    // 将"creatToken"保存在sessionStorage中
                    sessionStorage.setItem("creatToken", creatToken);
                    alert(message);

                    // 跳转到用户首页
                    window.location.href = '/Page/HomePage';
                } else if (response.status === false) {
                    // 登录失败的操作
                    message = '登录失败，请检查用户名和密码！';
                    alert(message);
                }

            },
            error: function (xhr, status, error) {
                var message = '登录失败，该用户不存在！请注册';
                alert(message);
            }
        });

    });
    $('#registrationButton').click(function () {
        $(this).prop('disabled', true);
        window.location.href = '/Page/regeditPage';

    });
});
